<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics</title>
    <!-- Adicione os links do Tailwind CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>
<body class="bg-gray-100 p-8">

    <div class="max-w-xl mx-auto bg-white p-6 rounded-md shadow-md">
      <input type="date" id="filterDate">
      <button onclick="reloadWithDate()" class="bg-blue-200 px-4 py-1 text-blue-600 font-semibold border border-blue-600">Filtrar</button><br>

      <script>
        function reloadWithDate() {
          const filterDate = document.getElementById('filterDate').value;
          const url = `/analytics/${filterDate}`;
          window.location.href = url;
      }

      </script>



        <h1 class="text-2xl font-bold mb-4">Visualizações de Jogos</h1>

        <canvas id="myChart" width="400" height="200"></canvas>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
          document.addEventListener('DOMContentLoaded', function() {
              const data = JSON.parse('<%- JSON.stringify(data) %>');
      
              const ctx = document.getElementById('myChart').getContext('2d');
              const myChart = new Chart(ctx, {
                  type: 'bar',
                  data: {
                      labels: data.map(game => game.name),
                      datasets: [{
                          label: 'Visualizações',
                          data: data.map(game => game.views),
                          backgroundColor: 'rgba(75, 192, 192, 0.2)',
                          borderColor: 'rgba(75, 192, 192, 1)',
                          borderWidth: 1
                      }]
                  },
                  options: {
                      scales: {
                          y: {
                              beginAtZero: true
                          }
                      }
                  }
              });
          });
      </script>
    </div>

</body>
</html>

